<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Backtest Analyzer</title>
  <link rel="stylesheet" href="./cdn/swiper.min.css"/>
  <link rel="stylesheet" href="./styles.css"/>
</head>
<body id="app">
  <div id="nav-bar" class="nav-bar">
    <button class="nav-btn" data-page="0">Dashboard</button>
    <button class="nav-btn" data-page="1">List Trade</button>
    <button class="nav-btn active" data-page="2">Statistics</button>
    <select id="sample-select" size="1" multiple>
	    <option value="EURJPY">EURJPY</option>
	    <option value="EURUSD">EURUSD</option>
	    <option value="GBPJPY">GBPJPY</option>
	    <option value="GBPUSD">GBPUSD</option>
	    <option value="USDCHF">USDCHF</option>
	    <option value="XAUUSD">XAUUSD</option>
    </select>
    <div class="dropup-wrapper">
      <button class="dropup-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7z" />
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.06A1.65 1.65 0 0 0 10.91 3V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.06a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.06a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
      </button>
      <div class="dropup-panel">
        <button id="toggle-swiper" class="item">Disable Slide</button>
        <button class="item">Settings</button>
        <button class="item">Logout</button>
      </div>
    </div>
  </div>
  
  <div id="page-dash" class="primary-content none">Dashboard Content</div>
  
  <div id="page-list" class="primary-content none"></div>

  <div id="page-stats" class="primary-content">
    
    <div class="tab-bar">
      <button class="tab-btn" data-index="0">Overview</button>
      <button class="tab-btn" data-index="1">General</button>
      <button class="tab-btn" data-index="2">Streak</button>
      <button class="tab-btn" data-index="3">Drawdown</button>
      <button class="tab-btn" data-index="4">Accumulate</button>
      <button class="tab-btn" data-index="5">Monthly</button>
      <button class="tab-btn" data-index="6">Summary</button>
    </div>
  
    <div class="swiper">
      <div class="swiper-wrapper">
        <div id="overview" class="swiper-slide"></div>
        <div id="general" class="swiper-slide"></div>
        <div id="streak" class="swiper-slide"></div>
        <div id="drawdown" class="swiper-slide"></div>
        <div id="accumulate" class="swiper-slide"></div>
        <div id="monthly" class="swiper-slide"></div>
        <div id="summary" class="swiper-slide"></div>
      </div>
    </div>
  
  </div>
  <div id="notify-area"></div>
  <script src="./cdn/swiper.min.js"></script>
	<script src="./cdn/chart.min.js"></script>
	<script src="./cdn/chart-plugin-hammer.min.js"></script>
	<script src="./cdn/chart-plugin-zoom.min.js"></script>
	<script src="./cdn/chart-plugin-annotation.min.js"></script>
	<script src="/cdn/eruda.min.js"></script>
	<script src="./debug.js"></script>
	<script type="module" src="app.js"></script>
	
<script>
const dropupBtn = document.querySelector(".dropup-btn");
const dropupPanel = document.querySelector(".dropup-panel");

// toggle
dropupBtn.addEventListener("click", () => {
  dropupPanel.classList.toggle("active");
});

// tutup saat klik di luar
document.addEventListener("click", (e) => {
  if (!dropupPanel.contains(e.target) && !dropupBtn.contains(e.target)) {
    dropupPanel.classList.remove("active");
  }
});

  const pageDash  = document.getElementById("page-dash");
  const pageList  = document.getElementById("page-list");
  const pageStats = document.getElementById("page-stats");
  const tabBar    = document.querySelector(".tab-bar");
  const navBtns   = document.querySelectorAll(".nav-btn");

  const pages = [pageDash, pageList, pageStats];

navBtns.forEach(btn => {
  btn.addEventListener("click", () => {
    const page = Number(btn.dataset.page);

    // ganti halaman
    pages.forEach((p, i) => {
      p.classList.toggle("none", i !== page);
    });

    // SET ACTIVE NAV BUTTON
    navBtns.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    // TAB BAR CONTROL (khusus statistics)
    if (page === 2) {
      tabBar.classList.remove("none");
      swiper.allowTouchMove = true;
    } else {
      tabBar.classList.add("none");
      swiper.allowTouchMove = false;
    }
  });
});

  // INIT SWIPER
  
  const swiper = new Swiper(".swiper", {
    resistanceRatio: 0.5,
    speed: 250,
    autoHeight: false,
    touchStartPreventDefault: false,
    on: {
      slideChange: () => updateTabs(swiper.activeIndex)
    }
  });

// STATE
let swiperEnabled = true;

// BUTTON
const toggleBtn = document.getElementById("toggle-swiper");

// EVENT
toggleBtn.addEventListener("click", () => {
  swiperEnabled = !swiperEnabled;

  swiper.allowTouchMove = swiperEnabled;

  toggleBtn.textContent = swiperEnabled ? "Disable Slide" : "Enable Slide";
});

const tabBtns = document.querySelectorAll(".tab-btn");

function updateTabs(active) {
  tabBtns.forEach((btn, i) => {
    btn.classList.toggle("active", i === active);

    if (i === active) {
      btn.scrollIntoView({
        behavior: "smooth",
        inline: "center",
        block: "nearest"
      });
    }
  });
}

tabBtns.forEach(btn => {
  btn.addEventListener("click", () => {
    swiper.slideTo(parseInt(btn.dataset.index));
  });
});

// ketika swiper digeser
swiper.on("slideChange", () => {
  updateTabs(swiper.activeIndex);
});

updateTabs(0);
</script>
</body>
</html>